cat > /usr/local/bin/status <<'EOF'
#!/bin/bash
set -e
echo -e "\033[1;33müîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Xray\033[0m"
echo "========================================"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω–æ–π —Å–ª—É–∂–±—ã
if systemctl is-active --quiet xray; then
    echo -e "\033[0;32m‚úÖ Xray —Ä–∞–±–æ—Ç–∞–µ—Ç\033[0m"
else
    echo -e "\033[0;31m‚ùå Xray –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç\033[0m"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–∞ 443
if ss -tuln | grep -q ':443 '; then
    echo -e "\033[0;32m‚úÖ –ü–æ—Ä—Ç 443 —Å–ª—É—à–∞–µ—Ç—Å—è\033[0m"
else
    echo -e "\033[0;31m‚ùå –ü–æ—Ä—Ç 443 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è\033[0m"
    exit 1
fi

# –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
echo -e "\n\033[0;32müë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:\033[0m"
total_users=$(wc -l < "/usr/local/etc/xray/.users" 2>/dev/null || echo 0)
echo "–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: $total_users"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (–±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
echo -e "\n\033[0;32müíª –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:\033[0m"
free -h | grep Mem:
df -h / | awk 'NR==2 {printf "–î–∏—Å–∫: %s —Å–≤–æ–±–æ–¥–Ω–æ –∏–∑ %s\n", $4, $2}'

echo -e "\n\033[0;33m‚ÑπÔ∏è  –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã:\033[0m"
echo "  ‚Ä¢ htop - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU –∏ –ø–∞–º—è—Ç–∏"
echo "  ‚Ä¢ nload - —Å–µ—Ç–µ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
echo "  ‚Ä¢ journalctl -u xray -n 50 - –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)"
echo -e "\033[1;31m–í–ê–ñ–ù–û: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è - —ç—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–µ '–ù–µ—Ç –ª–æ–≥–æ–≤'.\033[0m"
EOF
chmod +x /usr/local/bin/status
